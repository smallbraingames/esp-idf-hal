<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief          Check whether a buffer contains a valid and authentic record that has not been seen before. (DTLS only)."><title>mbedtls_ssl_check_record in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_idf_sys</a><span class="version">0.35.0</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">esp_idf_sys</a>::<wbr><a class="fn" href="#">mbedtls_ssl_check_record</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-9a109d5411b517fb/out/bindings.rs.html#39506-39510">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn mbedtls_ssl_check_record(
    ssl: *const <a class="struct" href="struct.mbedtls_ssl_context.html" title="struct esp_idf_sys::mbedtls_ssl_context">mbedtls_ssl_context</a>,
    buf: *mut c_uchar,
    buflen: usize,
) -&gt; c_int</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief          Check whether a buffer contains a valid and authentic record
that has not been seen before. (DTLS only).</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>            This function does not change the user-visible state
            of the SSL context. Its sole purpose is to provide
            an indication of the legitimacy of an incoming record.

            This can be useful e.g. <span class="kw">in </span>distributed server environments
            using the DTLS Connection ID feature, <span class="kw">in </span>which connections
            might need to be passed between service instances on a change
            of peer address, but <span class="kw">where </span>such disruptive operations should
            only happen after the validity of incoming records has been
            confirmed.</code></pre></div>
<p>\param ssl      The SSL context to use.
\param buf      The address of the buffer holding the record to be checked.
This must be a read/write buffer of length \p buflen Bytes.
\param buflen   The length of \p buf in Bytes.</p>
<p>\note           This routine only checks whether the provided buffer begins
with a valid and authentic record that has not been seen
before, but does not check potential data following the
initial record. In particular, it is possible to pass DTLS
datagrams containing multiple records, in which case only
the first record is checked.</p>
<p>\note           This function modifies the input buffer \p buf. If you need
to preserve the original record, you have to maintain a copy.</p>
<p>\return         \c 0 if the record is valid and authentic and has not been
seen before.
\return         MBEDTLS_ERR_SSL_INVALID_MAC if the check completed
successfully but the record was found to be not authentic.
\return         MBEDTLS_ERR_SSL_INVALID_RECORD if the check completed
successfully but the record was found to be invalid for
a reason different from authenticity checking.
\return         MBEDTLS_ERR_SSL_UNEXPECTED_RECORD if the check completed
successfully but the record was found to be unexpected
in the state of the SSL context, including replayed records.
\return         Another negative error code on different kinds of failure.
In this case, the SSL context becomes unusable and needs
to be freed or reset before reuse.</p>
</div></details></section></div></main></body></html>