<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief                       Continue and eventually complete the action of signing a hash or short message with a private key, in an interruptible manner."><title>psa_sign_hash_complete in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_idf_sys</a><span class="version">0.35.0</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">esp_idf_sys</a>::<wbr><a class="fn" href="#">psa_sign_hash_complete</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-9a109d5411b517fb/out/bindings.rs.html#33651-33656">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn psa_sign_hash_complete(
    operation: *mut <a class="type" href="type.psa_sign_hash_interruptible_operation_t.html" title="type esp_idf_sys::psa_sign_hash_interruptible_operation_t">psa_sign_hash_interruptible_operation_t</a>,
    signature: *mut u8,
    signature_size: usize,
    signature_length: *mut usize,
) -&gt; <a class="type" href="type.psa_status_t.html" title="type esp_idf_sys::psa_status_t">psa_status_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief                       Continue and eventually complete the action of
signing a hash or short message with a private
key, in an interruptible manner.</p>
<p>\see                         \c psa_sign_hash_start()</p>
<p>\warning                     This is a beta API, and thus subject to change
at any point. It is not bound by the usual
interface stability promises.</p>
<p>\note                        This function combined with \c
psa_sign_hash_start() is equivalent to
\c psa_sign_hash() but this function can return
early and resume according to the limit set with
\c psa_interruptible_set_max_ops() to reduce the
maximum time spent in a function call.</p>
<p>\note                        Users should call this function on the same
operation object repeatedly until it either
returns 0 or an error. This function will return
#PSA_OPERATION_INCOMPLETE if there is more work
to do. Alternatively users can call
\c psa_sign_hash_abort() at any point if they no
longer want the result.</p>
<p>\note                        When this function returns successfully, the
operation becomes inactive. If this function
returns an error status, the operation enters an
error state and must be aborted by calling
\c psa_sign_hash_abort().</p>
<p>\param[in, out] operation    The \c psa_sign_hash_interruptible_operation_t
to use. This must be initialized first, and have
had \c psa_sign_hash_start() called with it
first.</p>
<p>\param[out] signature        Buffer where the signature is to be written.
\param signature_size        Size of the \p signature buffer in bytes. This
must be appropriate for the selected
algorithm and key:
- The required signature size is
#PSA_SIGN_OUTPUT_SIZE(\c key_type, \c
key_bits, \c alg) where \c key_type and \c
key_bits are the type and bit-size
respectively of key.
- #PSA_SIGNATURE_MAX_SIZE evaluates to the
maximum signature size of any supported
signature algorithm.
\param[out] signature_length On success, the number of bytes that make up
the returned signature value.</p>
<p>\retval #PSA_SUCCESS
Operation completed successfully</p>
<p>\retval #PSA_OPERATION_INCOMPLETE
Operation was interrupted due to the setting of \c
psa_interruptible_set_max_ops(). There is still work to be done.
Call this function again with the same operation object.</p>
<p>\retval #PSA_ERROR_BUFFER_TOO_SMALL
The size of the \p signature buffer is too small. You can
determine a sufficient buffer size by calling
#PSA_SIGN_OUTPUT_SIZE(\c key_type, \c key_bits, \c alg)
where \c key_type and \c key_bits are the type and bit-size
respectively of \c key.</p>
<p>\retval #PSA_ERROR_BAD_STATE
An operation was not previously started on this context via
\c psa_sign_hash_start().</p>
<p>\retval #PSA_ERROR_NOT_SUPPORTED \emptydescription
\retval #PSA_ERROR_INVALID_ARGUMENT \emptydescription
\retval #PSA_ERROR_INSUFFICIENT_MEMORY \emptydescription
\retval #PSA_ERROR_COMMUNICATION_FAILURE \emptydescription
\retval #PSA_ERROR_HARDWARE_FAILURE \emptydescription
\retval #PSA_ERROR_CORRUPTION_DETECTED \emptydescription
\retval #PSA_ERROR_STORAGE_FAILURE \emptydescription
\retval #PSA_ERROR_DATA_CORRUPT \emptydescription
\retval #PSA_ERROR_DATA_INVALID \emptydescription
\retval #PSA_ERROR_INSUFFICIENT_ENTROPY \emptydescription
\retval #PSA_ERROR_BAD_STATE
The library has either not been previously initialized by
psa_crypto_init() or you did not previously call
psa_sign_hash_start() with this operation object. It is
implementation-dependent whether a failure to initialize results in
this error code.</p>
</div></details></section></div></main></body></html>