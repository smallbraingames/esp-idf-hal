<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="@brief Allocate an interrupt with the given parameters."><title>esp_intr_alloc in esp_idf_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../esp_idf_sys/index.html">esp_idf_sys</a><span class="version">0.35.0</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">esp_idf_sys</a>::<wbr><a class="fn" href="#">esp_intr_alloc</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-9a109d5411b517fb/out/bindings.rs.html#11350-11356">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn esp_intr_alloc(
    source: c_int,
    flags: c_int,
    handler: <a class="type" href="type.intr_handler_t.html" title="type esp_idf_sys::intr_handler_t">intr_handler_t</a>,
    arg: *mut c_void,
    ret_handle: *mut <a class="type" href="type.intr_handle_t.html" title="type esp_idf_sys::intr_handle_t">intr_handle_t</a>,
) -&gt; <a class="type" href="type.esp_err_t.html" title="type esp_idf_sys::esp_err_t">esp_err_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>@brief Allocate an interrupt with the given parameters.</p>
<p>This finds an interrupt that matches the restrictions as given in the flags
parameter, maps the given interrupt source to it and hooks up the given
interrupt handler (with optional argument) as well. If needed, it can return
a handle for the interrupt as well.</p>
<p>The interrupt will always be allocated on the core that runs this function.</p>
<p>If ESP_INTR_FLAG_IRAM flag is used, and handler address is not in IRAM or
RTC_FAST_MEM, then ESP_ERR_INVALID_ARG is returned.</p>
<p>@param source The interrupt source. One of the ETS_<em><em>INTR_SOURCE interrupt mux
sources, as defined in soc/soc.h, or one of the internal
ETS_INTERNAL</em></em><em>INTR_SOURCE sources as defined in this header.
@param flags An ORred mask of the ESP_INTR_FLAG</em>* defines. These restrict the
choice of interrupts that this routine can choose from. If this value
is 0, it will default to allocating a non-shared interrupt of level
1, 2 or 3. If this is ESP_INTR_FLAG_SHARED, it will allocate a shared
interrupt of level 1. Setting ESP_INTR_FLAG_INTRDISABLED will return
from this function with the interrupt disabled.
@param handler The interrupt handler. Must be NULL when an interrupt of level &gt;3
is requested, because these types of interrupts aren’t C-callable.
@param arg    Optional argument for passed to the interrupt handler
@param ret_handle Pointer to an intr_handle_t to store a handle that can later be
used to request details or free the interrupt. Can be NULL if no handle
is required.</p>
<p>@return ESP_ERR_INVALID_ARG if the combination of arguments is invalid.
ESP_ERR_NOT_FOUND No free interrupt found with the specified flags
ESP_OK otherwise</p>
</div></details></section></div></main></body></html>