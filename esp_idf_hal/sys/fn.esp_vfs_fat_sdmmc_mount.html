<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="@brief Convenience function to get FAT filesystem on SD card registered in VFS"><title>esp_vfs_fat_sdmmc_mount in esp_idf_hal::sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../esp_idf_hal/index.html">esp_idf_hal</a><span class="version">0.44.1</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In esp_idf_hal::sys</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">esp_idf_hal</a>::<wbr><a href="index.html">sys</a>::<wbr><a class="fn" href="#">esp_vfs_fat_sdmmc_mount</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-9a109d5411b517fb/out/bindings.rs.html#29342-29348">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn esp_vfs_fat_sdmmc_mount(
    base_path: *const i8,
    host_config: *const <a class="struct" href="struct.sdmmc_host_t.html" title="struct esp_idf_hal::sys::sdmmc_host_t">sdmmc_host_t</a>,
    slot_config: *const c_void,
    mount_config: *const <a class="struct" href="struct.esp_vfs_fat_mount_config_t.html" title="struct esp_idf_hal::sys::esp_vfs_fat_mount_config_t">esp_vfs_fat_mount_config_t</a>,
    out_card: *mut *mut <a class="struct" href="struct.sdmmc_card_t.html" title="struct esp_idf_hal::sys::sdmmc_card_t">sdmmc_card_t</a>,
) -&gt; i32</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>@brief Convenience function to get FAT filesystem on SD card registered in VFS</p>
<p>This is an all-in-one function which does the following:</p>
<ul>
<li>initializes SDMMC driver or SPI driver with configuration in host_config</li>
<li>initializes SD card with configuration in slot_config</li>
<li>mounts FAT partition on SD card using FATFS library, with configuration in mount_config</li>
<li>registers FATFS library with VFS, with prefix given by base_prefix variable</li>
</ul>
<p>This function is intended to make example code more compact.
For real world applications, developers should implement the logic of
probing SD card, locating and mounting partition, and registering FATFS in VFS,
with proper error checking and handling of exceptional conditions.</p>
<p>@note Use this API to mount a card through SDSPI is deprecated. Please call
<code>esp_vfs_fat_sdspi_mount()</code> instead for that case.</p>
<p>@param base_path     path where partition should be registered (e.g. “/sdcard”)
@param host_config   Pointer to structure describing SDMMC host. When using
SDMMC peripheral, this structure can be initialized using
SDMMC_HOST_DEFAULT() macro. When using SPI peripheral,
this structure can be initialized using SDSPI_HOST_DEFAULT()
macro.
@param slot_config   Pointer to structure with slot configuration.
For SDMMC peripheral, pass a pointer to sdmmc_slot_config_t
structure initialized using SDMMC_SLOT_CONFIG_DEFAULT.
@param mount_config  pointer to structure with extra parameters for mounting FATFS
@param[out] out_card  if not NULL, pointer to the card information structure will be returned via this argument
@return
- ESP_OK on success
- ESP_ERR_INVALID_STATE if esp_vfs_fat_sdmmc_mount was already called
- ESP_ERR_NO_MEM if memory can not be allocated
- ESP_FAIL if partition can not be mounted
- other error codes from SDMMC or SPI drivers, SDMMC protocol, or FATFS drivers</p>
</div></details></section></div></main></body></html>