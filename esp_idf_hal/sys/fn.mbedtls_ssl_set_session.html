<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief          Load a session for session resumption."><title>mbedtls_ssl_set_session in esp_idf_hal::sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../esp_idf_hal/index.html">esp_idf_hal</a><span class="version">0.44.1</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In esp_idf_hal::sys</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">esp_idf_hal</a>::<wbr><a href="index.html">sys</a>::<wbr><a class="fn" href="#">mbedtls_ssl_set_session</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-9a109d5411b517fb/out/bindings.rs.html#39596-39599">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn mbedtls_ssl_set_session(
    ssl: *mut <a class="struct" href="struct.mbedtls_ssl_context.html" title="struct esp_idf_hal::sys::mbedtls_ssl_context">mbedtls_ssl_context</a>,
    session: *const <a class="struct" href="struct.mbedtls_ssl_session.html" title="struct esp_idf_hal::sys::mbedtls_ssl_session">mbedtls_ssl_session</a>,
) -&gt; i32</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief          Load a session for session resumption.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>            Sessions loaded through this call will be considered
            <span class="kw">for </span>session resumption <span class="kw">in </span>the next handshake.</code></pre></div>
<p>\note           Even if this call succeeds, it is not guaranteed that
the next handshake will indeed be shortened through the
use of session resumption: The server is always free
to reject any attempt for resumption and fall back to
a full handshake.</p>
<p>\note           This function can handle a variety of mechanisms for session
resumption: For TLS 1.2, both session ID-based resumption and
ticket-based resumption will be considered. For TLS 1.3,
once implemented, sessions equate to tickets, and loading
one or more sessions via this call will lead to their
corresponding tickets being advertised as resumption PSKs
by the client.</p>
<p>\note           Calling this function multiple times will only be useful
once TLS 1.3 is supported. For TLS 1.2 connections, this
function should be called at most once.</p>
<p>\param ssl      The SSL context representing the connection which should
be attempted to be setup using session resumption. This
must be initialized via mbedtls_ssl_init() and bound to
an SSL configuration via mbedtls_ssl_setup(), but
the handshake must not yet have been started.
\param session  The session to be considered for session resumption.
This must be a session previously exported via
mbedtls_ssl_get_session(), and potentially serialized and
deserialized through mbedtls_ssl_session_save() and
mbedtls_ssl_session_load() in the meantime.</p>
<p>\return         \c 0 if successful.
\return         \c MBEDTLS_ERR_SSL_FEATURE_UNAVAILABLE if the session
could not be loaded because of an implementation limitation.
This error is non-fatal, and has no observable effect on
the SSL context or the session that was attempted to be loaded.
\return         Another negative error code on other kinds of failure.</p>
<p>\sa             mbedtls_ssl_get_session()
\sa             mbedtls_ssl_session_load()</p>
</div></details></section></div></main></body></html>