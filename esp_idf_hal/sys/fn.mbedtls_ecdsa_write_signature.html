<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="\brief           This function computes the ECDSA signature and writes it to a buffer, serialized as defined in RFC-4492: Elliptic Curve Cryptography (ECC) Cipher Suites for Transport Layer Security (TLS)."><title>mbedtls_ecdsa_write_signature in esp_idf_hal::sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../esp_idf_hal/index.html">esp_idf_hal</a><span class="version">0.44.1</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In esp_idf_hal::sys</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">esp_idf_hal</a>::<wbr><a href="index.html">sys</a>::<wbr><a class="fn" href="#">mbedtls_ecdsa_write_signature</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/esp_idf_sys/home/runner/work/esp-idf-hal/esp-idf-hal/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-9a109d5411b517fb/out/bindings.rs.html#32912-32928">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn mbedtls_ecdsa_write_signature(
    ctx: *mut <a class="struct" href="struct.mbedtls_ecp_keypair.html" title="struct esp_idf_hal::sys::mbedtls_ecp_keypair">mbedtls_ecp_keypair</a>,
    md_alg: u32,
    hash: *const u8,
    hlen: usize,
    sig: *mut u8,
    sig_size: usize,
    slen: *mut usize,
    f_rng: Option&lt;unsafe extern &quot;C&quot; fn(_: *mut c_void, _: *mut u8, _: usize) -&gt; i32&gt;,
    p_rng: *mut c_void,
) -&gt; i32</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>\brief           This function computes the ECDSA signature and writes it
to a buffer, serialized as defined in <em>RFC-4492:
Elliptic Curve Cryptography (ECC) Cipher Suites for
Transport Layer Security (TLS)</em>.</p>
<p>\warning         It is not thread-safe to use the same context in
multiple threads.</p>
<p>\note            The deterministic version is used if
#MBEDTLS_ECDSA_DETERMINISTIC is defined. For more
information, see <em>RFC-6979: Deterministic Usage
of the Digital Signature Algorithm (DSA) and Elliptic
Curve Digital Signature Algorithm (ECDSA)</em>.</p>
<p>\note            If the bitlength of the message hash is larger than the
bitlength of the group order, then the hash is truncated as
defined in <em>Standards for Efficient Cryptography Group
(SECG): SEC1 Elliptic Curve Cryptography</em>, section
4.1.3, step 5.</p>
<p>\see             ecp.h</p>
<p>\param ctx       The ECDSA context to use. This must be initialized
and have a group and private key bound to it, for example
via mbedtls_ecdsa_genkey() or mbedtls_ecdsa_from_keypair().
\param md_alg    The message digest that was used to hash the message.
\param hash      The message hash to be signed. This must be a readable
buffer of length \p hlen Bytes.
\param hlen      The length of the hash \p hash in Bytes.
\param sig       The buffer to which to write the signature. This must be a
writable buffer of length at least twice as large as the
size of the curve used, plus 9. For example, 73 Bytes if
a 256-bit curve is used. A buffer length of
#MBEDTLS_ECDSA_MAX_LEN is always safe.
\param sig_size  The size of the \p sig buffer in bytes.
\param slen      The address at which to store the actual length of
the signature written. Must not be \c NULL.
\param f_rng     The RNG function. This must not be \c NULL if
#MBEDTLS_ECDSA_DETERMINISTIC is unset. Otherwise,
it is used only for blinding and may be set to \c NULL, but
doing so is DEPRECATED.
\param p_rng     The RNG context to be passed to \p f_rng. This may be
\c NULL if \p f_rng is \c NULL or doesn’t use a context.</p>
<p>\return          \c 0 on success.
\return          An \c MBEDTLS_ERR_ECP_XXX, \c MBEDTLS_ERR_MPI_XXX or
\c MBEDTLS_ERR_ASN1_XXX error code on failure.</p>
</div></details></section></div></main></body></html>