<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Single-slot lock-free signaling primitive supporting signalling with a `u32` bit-set. A variation of the `IsrNotification` HAL primitive which is however safe to be notified from an ISR context. The difference between this primitive and `IsrNotification` is that this one is hard-wired to the global HAL wake runner (`HAL_WAKE_RUNNER`) and is thus occupying less space."><title>HalIsrNotification in esp_idf_hal::interrupt::asynch - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../esp_idf_hal/index.html">esp_idf_hal</a><span class="version">0.44.1</span></h2></div><h2 class="location"><a href="#">HalIsrNotification</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.new">new</a></li><li><a href="#method.notify">notify</a></li><li><a href="#method.notify_lsb">notify_lsb</a></li><li><a href="#method.poll_wait">poll_wait</a></li><li><a href="#method.reset">reset</a></li><li><a href="#method.wait">wait</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block trait-implementation"><li><a href="#impl-Default-for-HalIsrNotification">Default</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block synthetic-implementation"><li><a href="#impl-Freeze-for-HalIsrNotification">!Freeze</a></li><li><a href="#impl-RefUnwindSafe-for-HalIsrNotification">!RefUnwindSafe</a></li><li><a href="#impl-Send-for-HalIsrNotification">Send</a></li><li><a href="#impl-Sync-for-HalIsrNotification">Sync</a></li><li><a href="#impl-Unpin-for-HalIsrNotification">Unpin</a></li><li><a href="#impl-UnwindSafe-for-HalIsrNotification">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block blanket-implementation"><li><a href="#impl-Any-for-T">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-T">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-T">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-T">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-T">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E-for-T">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-T">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In esp_idf_hal::interrupt::asynch</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Struct <a href="../../index.html">esp_idf_hal</a>::<wbr><a href="../index.html">interrupt</a>::<wbr><a href="index.html">asynch</a>::<wbr><a class="struct" href="#">HalIsrNotification</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/esp_idf_hal/interrupt.rs.html#593-595">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub struct HalIsrNotification { <span class="comment">/* private fields */</span> }</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Single-slot lock-free signaling primitive supporting signalling with a <code>u32</code> bit-set.
A variation of the <code>IsrNotification</code> HAL primitive which is however safe to be notified from an ISR context.
The difference between this primitive and <code>IsrNotification</code> is that this one is hard-wired to the
global HAL wake runner (<code>HAL_WAKE_RUNNER</code>) and is thus occupying less space.</p>
<p>It is useful for sending data between an ISR routine (or a regular task context) and an async task when the
receiver only cares about the latest data, and therefore it’s fine to “lose” messages.
This is often the case for “state” updates.</p>
<p>The sending part of the primitive is non-blocking and ISR-safe, so it can be called from anywhere.</p>
<p>Similar in spirit to the ESP-IDF FreeRTOS task notifications in that it is light-weight and operates on bit-sets,
but for synchronization between an asynchronous task, and another one, which might be blocking or asynchronous.</p>
</div></details><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-HalIsrNotification" class="impl"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#603-654">source</a><a href="#impl-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.new" class="method"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#606-610">source</a><h4 class="code-header">pub const fn <a href="#method.new" class="fn">new</a>() -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a new <code>HalIsrNotification</code>.
This method is safe to call from an ISR context, yet such use cases should not normally occur in practice.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.notify_lsb" class="method"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#615-617">source</a><h4 class="code-header">pub fn <a href="#method.notify_lsb" class="fn">notify_lsb</a>(&amp;self) -&gt; bool</h4></section></summary><div class="docblock"><p>Marks the least significant bit (bit 0) in this <code>IsrNotification</code> as nofified.
This method is safe to call from an ISR context.
Returns <code>true</code> if there was a registered waker which got awoken.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.notify" class="method"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#622-630">source</a><h4 class="code-header">pub fn <a href="#method.notify" class="fn">notify</a>(&amp;self, bits: NonZeroU32) -&gt; bool</h4></section></summary><div class="docblock"><p>Marks the supplied bits in this <code>HalIsrNotification</code> as notified.
This method is safe to call from an ISR context.
Returns <code>true</code> if there was a registered waker which got awoken.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.reset" class="method"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#634-636">source</a><h4 class="code-header">pub fn <a href="#method.reset" class="fn">reset</a>(&amp;self)</h4></section></summary><div class="docblock"><p>Clears the state of this notification by removing any registered waker and setting all bits to 0.
This method is NOT safe to call from an ISR context.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wait" class="method"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#641-645">source</a><h4 class="code-header">pub fn <a href="#method.wait" class="fn">wait</a>(&amp;self) -&gt; impl Future&lt;Output = NonZeroU32&gt; + '_</h4></section></summary><div class="docblock"><p>Future that completes when this <code>HalIsrNotification</code> has been notified.
This method is NOT safe to call from an ISR context.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.poll_wait" class="method"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#649-653">source</a><h4 class="code-header">pub fn <a href="#method.poll_wait" class="fn">poll_wait</a>(&amp;self, cx: &amp;Context&lt;'_&gt;) -&gt; Poll&lt;NonZeroU32&gt;</h4></section></summary><div class="docblock"><p>Non-blocking method to check whether this notification has been notified.
This method is NOT safe to call from an ISR context.</p>
</div></details></div></details></div><h2 id="trait-implementations" class="section-header">Trait Implementations<a href="#trait-implementations" class="anchor">§</a></h2><div id="trait-implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-Default-for-HalIsrNotification" class="impl"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#597-601">source</a><a href="#impl-Default-for-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl Default for <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.default" class="method trait-impl"><a class="src rightside" href="../../../src/esp_idf_hal/interrupt.rs.html#598-600">source</a><a href="#method.default" class="anchor">§</a><h4 class="code-header">fn <a class="fn">default</a>() -&gt; Self</h4></section></summary><div class='docblock'>Returns the “default value” for a type. <a>Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor">§</a></h2><div id="synthetic-implementations-list"><section id="impl-Freeze-for-HalIsrNotification" class="impl"><a href="#impl-Freeze-for-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl !Freeze for <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section><section id="impl-RefUnwindSafe-for-HalIsrNotification" class="impl"><a href="#impl-RefUnwindSafe-for-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl !RefUnwindSafe for <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section><section id="impl-Send-for-HalIsrNotification" class="impl"><a href="#impl-Send-for-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl Send for <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section><section id="impl-Sync-for-HalIsrNotification" class="impl"><a href="#impl-Sync-for-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl Sync for <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section><section id="impl-Unpin-for-HalIsrNotification" class="impl"><a href="#impl-Unpin-for-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl Unpin for <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section><section id="impl-UnwindSafe-for-HalIsrNotification" class="impl"><a href="#impl-UnwindSafe-for-HalIsrNotification" class="anchor">§</a><h3 class="code-header">impl UnwindSafe for <a class="struct" href="struct.HalIsrNotification.html" title="struct esp_idf_hal::interrupt::asynch::HalIsrNotification">HalIsrNotification</a></h3></section></div><h2 id="blanket-implementations" class="section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor">§</a></h2><div id="blanket-implementations-list"><details class="toggle implementors-toggle"><summary><section id="impl-Any-for-T" class="impl"><a href="#impl-Any-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; Any for T<div class="where">where
    T: 'static + ?Sized,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl"><a href="#method.type_id" class="anchor">§</a><h4 class="code-header">fn <a class="fn">type_id</a>(&amp;self) -&gt; TypeId</h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a>Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-T" class="impl"><a href="#impl-Borrow%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; Borrow&lt;T&gt; for T<div class="where">where
    T: ?Sized,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl"><a href="#method.borrow" class="anchor">§</a><h4 class="code-header">fn <a class="fn">borrow</a>(&amp;self) -&gt; &amp;T</h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a>Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-T" class="impl"><a href="#impl-BorrowMut%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; BorrowMut&lt;T&gt; for T<div class="where">where
    T: ?Sized,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl"><a href="#method.borrow_mut" class="anchor">§</a><h4 class="code-header">fn <a class="fn">borrow_mut</a>(&amp;mut self) -&gt; &amp;mut T</h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a>Read more</a></div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-T" class="impl"><a href="#impl-From%3CT%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T&gt; From&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.from" class="method trait-impl"><a href="#method.from" class="anchor">§</a><h4 class="code-header">fn <a class="fn">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-T" class="impl"><a href="#impl-Into%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; Into&lt;U&gt; for T<div class="where">where
    U: From&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.into" class="method trait-impl"><a href="#method.into" class="anchor">§</a><h4 class="code-header">fn <a class="fn">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code>[From]&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-T" class="impl"><a href="#impl-TryFrom%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; TryFrom&lt;U&gt; for T<div class="where">where
    U: Into&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl"><a href="#associatedtype.Error-1" class="anchor">§</a><h4 class="code-header">type <a class="associatedtype">Error</a> = Infallible</h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl"><a href="#method.try_from" class="anchor">§</a><h4 class="code-header">fn <a class="fn">try_from</a>(value: U) -&gt; Result&lt;T, &lt;T as TryFrom&lt;U&gt;&gt;::Error&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-T" class="impl"><a href="#impl-TryInto%3CU%3E-for-T" class="anchor">§</a><h3 class="code-header">impl&lt;T, U&gt; TryInto&lt;U&gt; for T<div class="where">where
    U: TryFrom&lt;T&gt;,</div></h3></section></summary><div class="impl-items"><details class="toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl"><a href="#associatedtype.Error" class="anchor">§</a><h4 class="code-header">type <a class="associatedtype">Error</a> = &lt;U as TryFrom&lt;T&gt;&gt;::Error</h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl"><a href="#method.try_into" class="anchor">§</a><h4 class="code-header">fn <a class="fn">try_into</a>(self) -&gt; Result&lt;U, &lt;U as TryFrom&lt;T&gt;&gt;::Error&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main></body></html>