<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Cyclic Redundancy Check"><title>esp_idf_hal::rom::crc - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="esp_idf_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0-nightly (35b658fb1 2024-07-08)" data-channel="nightly" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../esp_idf_hal/index.html">esp_idf_hal</a><span class="version">0.44.1</span></h2></div><h2 class="location"><a href="#">Module crc</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In esp_idf_hal::rom</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">esp_idf_hal</a>::<wbr><a href="../index.html">rom</a>::<wbr><a class="mod" href="#">crc</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/esp_idf_hal/rom.rs.html#6">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Cyclic Redundancy Check</p>
<p>These are safe abstractions to the CRC functions in the ESP32 ROM.
Some chips may not include all of these functions so they will be compiled
into the program binary in those cases.</p>
<h2 id="parameters"><a class="doc-anchor" href="#parameters">§</a>Parameters</h2>
<p>The ROM provides the following polynomials for each CRC width:</p>
<div><table><thead><tr><th>CRC Width</th><th>Polynomial</th></tr></thead><tbody>
<tr><td>CRC-8</td><td>0x07</td></tr>
<tr><td>CRC-16</td><td>0x1021</td></tr>
<tr><td>CRC-32</td><td>0x04c11db7</td></tr>
</tbody></table>
</div>
<p>The “big-endian” <code>*_be()</code> functions are left-shifting algorithms to be used
when input and output reflection are <strong>not</strong> needed. If input and output
reflection <strong>are</strong> needed, the right-shifting “little-endian” <code>*_le()</code>
functions should be used.</p>
<p>These functions are designed to compute a CRC over a single buffer or as an
ongoing calculation over multiple buffers. To do this, the initial value
passed in and the final value returned are one’s complemented.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// CRC-32/MPEG-2
</span><span class="kw">const </span>CRC_INITIAL = <span class="number">0xffffffff</span>; <span class="comment">// "init" or "xorin" of all ones
</span><span class="kw">let </span><span class="kw-2">mut </span>crc = crc32_be(!CRC_INITIAL, <span class="kw-2">&amp;</span>data0); <span class="comment">// start
</span>crc = crc32_be(crc, <span class="kw-2">&amp;</span>data1);
crc = !crc32_be(crc, <span class="kw-2">&amp;</span>data2); <span class="comment">// finish</span></code></pre></div>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<p>A catalogue of these parameters can be found at
<a href="https://reveng.sourceforge.io/crc-catalogue/all.htm">https://reveng.sourceforge.io/crc-catalogue/all.htm</a></p>
<p>CRC-32/ISO-HDLC poly=0x04c11db7 init=0xffffffff refin=true refout=true xorout=0xffffffff</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>crc = crc32_le(!<span class="number">0xffffffff</span>, <span class="kw-2">&amp;</span>data);</code></pre></div>
<p>CRC-32/BZIP2 poly=0x04c11db7 init=0xffffffff refin=false refout=false xorout=0xffffffff</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>crc = crc32_be(!<span class="number">0xffffffff</span>, <span class="kw-2">&amp;</span>data);</code></pre></div>
<p>CRC-32/MPEG-2 poly=0x04c11db7 init=0xffffffff refin=false refout=false xorout=0x00000000</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>crc = !crc32_be(!<span class="number">0xffffffff</span>, <span class="kw-2">&amp;</span>data);</code></pre></div>
<p>CRC-32/CKSUM poly=0x04c11db7 init=0x00000000 refin=false refout=false xorout=0xffffffff</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>crc = crc32_be(!<span class="number">0</span>, <span class="kw-2">&amp;</span>data);</code></pre></div>
<p>CRC-16/KERMIT poly=0x1021 init=0x0000 refin=true refout=true xorout=0x0000</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>crc = !crc16_le(!<span class="number">0</span>, <span class="kw-2">&amp;</span>data);</code></pre></div>
</div></details><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.crc8_be.html" title="fn esp_idf_hal::rom::crc::crc8_be">crc8_be</a></div><div class="desc docblock-short">Left-shifting CRC-8 with polynomial 0x07</div></li><li><div class="item-name"><a class="fn" href="fn.crc8_le.html" title="fn esp_idf_hal::rom::crc::crc8_le">crc8_le</a></div><div class="desc docblock-short">Right-shifting CRC-8 with polynomial 0x07</div></li><li><div class="item-name"><a class="fn" href="fn.crc16_be.html" title="fn esp_idf_hal::rom::crc::crc16_be">crc16_be</a></div><div class="desc docblock-short">Left-shifting CRC-16 with polynomial 0x1021</div></li><li><div class="item-name"><a class="fn" href="fn.crc16_le.html" title="fn esp_idf_hal::rom::crc::crc16_le">crc16_le</a></div><div class="desc docblock-short">Right-shifting CRC-16 with polynomial 0x1021</div></li><li><div class="item-name"><a class="fn" href="fn.crc32_be.html" title="fn esp_idf_hal::rom::crc::crc32_be">crc32_be</a></div><div class="desc docblock-short">Left-shifting CRC-32 with polynomial 0x04c11db7</div></li><li><div class="item-name"><a class="fn" href="fn.crc32_le.html" title="fn esp_idf_hal::rom::crc::crc32_le">crc32_le</a></div><div class="desc docblock-short">Right-shifting CRC-32 with polynomial 0x04c11db7</div></li></ul></section></div></main></body></html>